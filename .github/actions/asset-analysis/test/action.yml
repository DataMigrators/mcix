# action.yml
name: 'MCIX asset-analysis test action'
author: 'Data Migrators Pty Ltd'
description: 'Runs mcix system version'

inputs:
  rules:
    description: 'Path to the compliance rules'
    required: false
    default: /app/rules
  path:
    description: 'Path to the DataStage assets to analyze'
    required: false
    default: /app/datastage
  report:
    description: 'JUnit report file path'
    required: false
    default: /app/asset_analysis_report.xml
  test-suite:
    description: 'Test suite name'
    required: false
    default: 'mcix tests'
  ignore-test-failures:
    description: 'Ignore test failures (always return 0)'
    required: false
  include-job-in-test-name:
    description: 'Include job name in test name'
    required: false

outputs:
  return-code:
    description: 'The return code of the command'

runs:
  using: 'docker'
  image: 'Dockerfile' # Refers to the Dockerfile in the current directory
  args:
    - ${{ inputs.rules }}
    - ${{ inputs.path }}
    - ${{ inputs.report }}
    - ${{ inputs.test-suite }}
    - ${{ inputs.ignore-test-failures }}
    - ${{ inputs.include-job-in-test-name }}

branding:
  icon: 'search'
  color: 'blue'
